<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React</title>
    <style>
      #root {
        display: flex;
        justify-content: center;
        font-size: 1.2rem;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .container {
        margin-top: 2rem;
        padding: 2rem 3rem;
        box-shadow: 8px 8px 0px #007c9c;
        border: 2px solid #19748c;
      }

      input[type="text"] {
        width: 350px;
        font-size: 1rem;
        padding: 8px;
        outline: 0;
        border: 1px solid #007c9c;
        border-radius: 3px 3px;
      }

      input[type="text"]:focus {
        border-color: #007c9c;
        box-shadow: 0 0 3px 4px rgb(0 124 156 / 16%);
      }

      .todo {
        background-color: #007c9c;
        padding: 0.5rem;
        border-radius: 3px;
        margin: 15px 0;
        color: white;
        display: flex;
        align-items: center;
        word-wrap: break-word;
      }

      .todo-text {
        flex-grow: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        margin-right: 10px;
      }

      .todo span {
        background-color: #007c9c;
        color: #ffffff;
        width: 20px;
        height: 20px;
        text-align: center;
        font-size: 16px;
        cursor: pointer;
        border-radius: 50%;
        line-height: 20px;
      }

      .todo span:hover {
        color: silver;
      }

      .edit-button {
        background-color: transparent;
        border: none;
        color: white;
        font-size: 16px;
        cursor: pointer;
        margin-left: 10px;
        line-height: 1;
      }

      .edit-button:hover {
        color: silver;
      }

      .small-error {
        display: block;
        color: red;
        margin-top: 0.5rem;
      }

      .sort-buttons {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
      }

      .sort-button {
        background-color: #007c9c;
        color: white;
        border: none;
        border-radius: 3px;
        padding: 0.5rem 1rem;
        font-size: 1rem;
        cursor: pointer;
        margin-right: 1rem;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script src="js/react.development.js"></script>
    <script src="js/react-dom.development.js"></script>
    <script src="js/babel.js"></script>
    <script type="text/babel">
      // Data awal todos
      const todos = [
        { id: "01", text: "Baca buku React Uncover" },
        { id: "02", text: "Makan siang" },
        { id: "03", text: "Main game" },
      ];

      // Komponen Todo untuk menampilkan satu todo item
      const Todo = (props) => {
        return (
          <div className="todo">
            {props.text}
            <span id={props.id} onClick={props.onTodoClick}>
              x
            </span>
          </div>
        );
      };

      // Komponen TodoForm untuk menambahkan todo baru
      const TodoForm = (props) => {
        const [inputTodo, setInputTodo] = React.useState("");
        const [pesanErrors, setpesanErrors] = React.useState(null);

        const handleInputChange = (e) => {
          setInputTodo(e.target.value);
        };

        const handleFormSubmit = (e) => {
          e.preventDefault();
          if (inputTodo.trim() === "") {
            setpesanErrors("Todo tidak boleh kosong");
          } else {
            // Input todo baru ke dalam state
            props.onAddTodo(inputTodo);
            // Kosongkan input text
            setInputTodo("");
          }
        };

        return (
          <form onSubmit={handleFormSubmit}>
            <div>
              <input
                type="text"
                placeholder="Add todo..."
                value={inputTodo}
                onChange={handleInputChange}
              />
              {pesanErrors && <small>{pesanErrors}</small>}
            </div>
          </form>
        );
      };

      // Komponen MyApp sebagai komponen utama aplikasi
      class MyApp extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            arrayTodo: todos,
          };
        }

        // Menghapus todo berdasarkan ID
        handleDeleteClick = (e) => {
          const newTodos = this.state.arrayTodo.filter(
            (item) => item.id !== e.target.id
          );
          this.setState({ arrayTodo: newTodos });
        };

        // Menambahkan todo baru
        handleAddTodo = (text) => {
          const newTodos = [
            ...this.state.arrayTodo,
            {
              id: new Date().getTime().toString(),
              text: text,
            },
          ];
          this.setState({ arrayTodo: newTodos });
        };

        // Mengurutkan todos secara ascending
        handleSortAscending = () => {
          const sortedTodos = [...this.state.arrayTodo].sort((a, b) =>
            a.text.localeCompare(b.text)
          );
          this.setState({ arrayTodo: sortedTodos });
        };

        // Mengurutkan todos secara descending
        handleSortDescending = () => {
          const sortedTodos = [...this.state.arrayTodo].sort((a, b) =>
            b.text.localeCompare(a.text)
          );
          this.setState({ arrayTodo: sortedTodos });
        };

        render() {
          return (
            <div className="container">
              {/* Menampilkan daftar todos */}
              {this.state.arrayTodo.map((todo) => (
                <Todo
                  key={todo.id}
                  id={todo.id}
                  text={todo.text}
                  onTodoClick={this.handleDeleteClick}
                />
              ))}

              {/* Menambahkan form untuk menambahkan todo baru */}
              <TodoForm onAddTodo={this.handleAddTodo} />

              {/* Tombol Sort Ascending dan Sort Descending */}
              <div className="sort-buttons">
                <button onClick={this.handleSortAscending}>
                  Sort Ascending
                </button>
                <button onClick={this.handleSortDescending}>
                  Sort Descending
                </button>
              </div>
            </div>
          );
        }
      }

      // Render komponen MyApp ke dalam elemen dengan id 'root'
      ReactDOM.createRoot(document.getElementById("root")).render(<MyApp />);
    </script>
  </body>
</html>
